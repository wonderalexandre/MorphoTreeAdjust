# Benchmark config example
# Lines use key=value or key: value. Comments start with '#'.

# Images (repeat "image=" or use glob with *)
#image=../dat/icdar_1024p/*.png
image=../dat/icdar_720p/*.png
#image=../dat/icdar_480p/*.png

#image=../dat/icdar_480p/test_001.png

# Methods (repeat "method=" or use "methods=" list)
#method=naive
#method=our
#method=our_hybrid
method=our_subtree
#method=our_hybrid_subtree

# graph_type: any | on_demand | eager | on_pixel (naive/pixel alias)
graph_type=on_pixel

# Timing parameters
repeat=3
warmup=1

# Algorithm parameters
radio_adj=1.5
cutoff_hybrid=2
cutoff_hybrid_subtree=1
# attribute: area | bbox_width | bbox_height | bbox_diagonal (bbox=diagonal)
attribute=area

#1024p 
#thresholds=50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000, 1050, 1100, 1150, 1200, 1250, 1300, 1350, 1400, 1450, 1500, 1550, 1600, 1650, 1700, 1750, 1800, 1850, 1900, 1950, 2000, 2050, 2100, 2150, 2200, 2250, 2300, 2350, 2400, 2450, 2500 

#720p
thresholds= 22, 44, 67, 89, 111, 133, 156, 178, 200, 222, 244, 267, 289, 311, 333, 356, 378, 400, 422, 444, 467, 489, 511, 533, 556, 578, 600, 622, 644, 667, 689, 711, 733, 756, 778, 800, 822, 844, 867, 889, 911, 933, 956, 978, 1000, 1022, 1044, 1067, 1089, 1111

#480p
#thresholds=10, 20, 30, 40, 49, 59, 69, 79, 89, 99, 109, 119, 128, 138, 148, 158, 168, 178, 188, 198, 207, 217, 227, 237, 247, 257, 267, 277, 286, 296, 306, 316, 326, 336, 346, 356, 365, 375, 385, 395, 405, 415, 425, 435, 444, 454, 464, 474, 484, 494

# Output controls
quiet=false
json=true
no_validate=true
validate_only=false
stats=true
iter_stats=true


#for method in naive our our_subtree our_hybrid our_hybrid_subtree; do
#  caffeinate -dims ./jmiv2026_benchmark \
#    --config ../jmiv2026_benchmark.conf \
#    --method "$method" \
#    > "out_720p_${method}_area_new.json"
#done

#Observations:
# for hybrid methods, run patch_flatzones_json.py to fix flat zones counts in first iteration (naive)
#
#python3 ../patch_flatzones_json.py \
#  --in out_480p_our_hybrid_area_eager.json \
#  --ref out_480p_our_area_eager.json \
#  --out out_480p_our_hybrid_area_eagerFixed.json \
#  --target-method our_hybrid_eager --ref-method our_eager
